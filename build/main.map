{"version":3,"sources":["webpack:///webpack/bootstrap 1df1da96c104b76022af","webpack:///external \"express\"","webpack:///external \"fs\"","webpack:///./server/dbconfig.js","webpack:///./server/Dao.js","webpack:///./server/index.js","webpack:///external \"nuxt\"","webpack:///external \"body-parser\"","webpack:///external \"express-session\"","webpack:///external \"express-mysql-session\"","webpack:///./server/api/index.js","webpack:///./server/api/user.js","webpack:///external \"mysql\"","webpack:///./server/api/upload.js","webpack:///external \"multer\"","webpack:///./server/api/account.js","webpack:///./server/dao/userDao.js","webpack:///external \"crypto\"","webpack:///./nuxt.config.js"],"names":["module","exports","mysql","host","user","password","database","port","models","require","pool","createPool","query","sql","params","callback","getConnection","err","connection","console","log","result","release","error","app","express","session","MySQLStore","use","key","secret","cookie","maxAge","secure","sameSite","store","connectionLimit","expiration","resave","saveUninitialized","process","env","HOST","PORT","bodyParser","urlencoded","extended","json","static","__dirname","req","res","next","url","originalUrl","arr","split","i","length","redirect","api","set","config","dev","nuxt","builder","build","render","listen","get","router","Router","db","post","user2","body","username","fs","multer","storage","diskStorage","destination","file","cb","filename","Date","now","originalname","upload","any","files","end","userDao","name","queryUser","errCode","msg","addUser","insertId","crypto","createHash","update","digest","head","title","meta","charset","content","hid","link","rel","type","href","css","vendor","extend","ctx","isClient","rules","push","enforce","test","loader","exclude","plugins"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1df1da96c104b76022af","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 1\n// module chunks = 0","module.exports = {\r\n  mysql: {\r\n    host: 'localhost',\r\n    user: 'chen',\r\n    password: 'P@ssw0rd',\r\n    database: 'jcp_sys',\r\n    port: '3306'\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./server/dbconfig.js","let models = require('./dbconfig')\r\nlet mysql = require('mysql')\r\n\r\nlet pool = mysql.createPool(models.mysql)\r\n\r\nlet query = function (sql, params, callback) {\r\n  try {\r\n    pool.getConnection((err, connection) => {\r\n      if (err) {\r\n        console.log(err)\r\n        return callback(true)\r\n      }\r\n      //链接\r\n      connection.query(sql, params, (err, result) => {\r\n        //释放链接\r\n        connection.release()\r\n        if (err) {\r\n          console.error('db error01:' + err)\r\n          return callback(true)\r\n        }\r\n        callback(false, result)\r\n      })\r\n    })\r\n  } catch (err) {\r\n    console.error('db error02:' + err)\r\n    return callback(true)\r\n  }\r\n}\r\n\r\nmodule.exports.query = query\r\n\n\n\n// WEBPACK FOOTER //\n// ./server/Dao.js","import fs from 'fs'\nimport express from 'express'\nimport { Nuxt, Builder } from 'nuxt'\nimport bodyParser from 'body-parser'\n// import multer from 'multer'\n// import fs from 'fs'\n// const UPLOAD_PATH = './uploads'\n\n// import api from './api'\n\nconst app = express()\nvar session = require('express-session')\nvar MySQLStore = require('express-mysql-session')(session)\nlet models = require('./dbconfig')\n\n// session 中间件\napp.use(session({\n  key: 'ckey',\n  secret: 'chen',\n  cookie: {\n    // ms\n    maxAge: 1 * 60 * 60 * 1000,\n    secure: false,\n    sameSite: false\n  },\n  store: new MySQLStore(models.mysql),\n  connectionLimit: 10,\n  expiration: 86400000,\n  resave: false,\n  saveUninitialized: true\n}))\n\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || 3000\n\n// app.use(bodyParser)\n// app.use(express.bodyParser({uploadDir: './uploads'}))\n// post请求转化为json\napp.use(bodyParser.urlencoded({extended: true}))\napp.use(bodyParser.json())\n// 设置静态目录\napp.use(express.static(__dirname + '/upload_tmp'))\napp.use(express.static('upload_tmp'))\n// 拦截徐恒目录\napp.use('/xuheng', function (req, res, next) {\n  if (req.session.user) {  // 判断用户是否登录\n    console.log('002')\n    next()\n  } else {\n    // 解析用户请求的路径\n    var url = req.originalUrl ? req.originalUrl : req.url\n    var arr = url.split('/')\n    // 去除 GET 请求路径上携带的参数\n    for (var i = 0, length = arr.length; i < length; i++) {\n      arr[i] = arr[i].split('?')[0]\n    }\n    // 判断请求路径是否为根、登录、注册、登出，如果是不做拦截\n    if (arr.length > 1 && arr[1] == '') {\n      console.log(req.originalUrl)\n      console.log(req.url)\n      console.log(arr)\n      next()\n    } else if (arr.length > 2 && arr[1] == 'login' && (arr[2] == 'register' || arr[2] == 'index' || arr[2] == 'logout')) {\n      console.log('004')\n      next()\n    } else {  // 登录拦截\n      console.log(arr)\n      console.log(req.originalUrl)\n      req.session.originalUrl = req.originalUrl ? req.originalUrl : null  // 记录用户原始请求路径\n      res.redirect('/login')  // 将用户重定向到登录页面\n    }\n  }\n})\n// Import Routes\nlet api = require('./api/index')(app)\n\napp.set('port', port)\n\n// Import API Routes\n// app.use('/api', api)\n\n// Import and Set Nuxt.js options\nlet config = require('../nuxt.config.js')\nconfig.dev = !(process.env.NODE_ENV === 'production')\n\n// Init Nuxt.js\nconst nuxt = new Nuxt(config)\n\n// Build only in dev mode\nif (config.dev) {\n  const builder = new Builder(nuxt)\n  builder.build()\n}\n\n// Give nuxt middleware to express\napp.use(nuxt.render)\n\n// Listen the server\napp.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"express-mysql-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-mysql-session\"\n// module id = 8\n// module chunks = 0","// import { Router } from 'express'\n//\n// import users from './users'\n//\n// const router = Router()\n//\n// // Add USERS Routes\n// router.use(users)\n//\n// export default router\n\nmodule.exports = app => {\n  app.get('/index', (req, res) => {\n    res.redirect('/xuheng')\n  })\n  app.use('/api/user', require('./user'))\n  app.use('/api/upload', require('./upload'))\n  app.use('/api/account', require('./account'))\n  //\n  // app.use('/api/tag', require('./tag'))\n  //\n  // app.use('/api/post/tag', require('./postTag'))\n}\n\n\n// WEBPACK FOOTER //\n// ./server/api/index.js","let express = require('express')\nlet router = express.Router()\n\nlet db = require('../Dao')\n\nrouter.post('/adduser', (req) => {\n  let user2 = req.body.username || ''\n  let sql = 'insert into user (id, name) values (0, ?) '\n  db.query(sql, [user2], (err) => {\n    if (err) {\n      return err\n    }\n  })\n})\n\nmodule.exports = router\n\n\n// WEBPACK FOOTER //\n// ./server/api/user.js","module.exports = require(\"mysql\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mysql\"\n// module id = 11\n// module chunks = 0","var fs = require('fs')\nvar express = require('express')\nvar multer = require('multer')\n\nvar router = express.Router()\n// var upload = multer({dest: 'upload_tmp/'})\n\nvar storage = multer.diskStorage({\n  destination: function (req, file, cb) {\n    cb(null, 'upload_tmp/')    // 保存的路径，备注：需要自己创建\n  },\n  filename: function (req, file, cb) {\n    // 将保存文件名设置为 字段名 + 时间戳，比如 logo-1478521468943\n    cb(null, Date.now() + '-' + file.originalname)\n  }\n})\n\n// 通过 storage 选项来对 上传行为 进行定制化\nvar upload = multer({storage: storage})\n\nrouter.post('/upload', upload.any(), function (req, res, next) {\n  console.log(req.files[0])  // 上传的文件信息\n  res.end(req.files[0].filename) // 响应返回文件名\n  // 记录图片\n  // var des_file = './upload/' + req.files[0].originalname\n  // fs.readFile(req.files[0].path, function (err, data) {\n  //   fs.writeFile(des_file, data, function (err) {\n  //     if (err) {\n  //       console.log(err)\n  //     } else {\n  //       response = {\n  //         message: 'File uploaded successfully',\n  //         filename: des_file\n  //       }\n  //       console.log(response)\n  //       res.end(JSON.stringify(response))\n  //     }\n  //   })\n  // })\n})\n\nmodule.exports = router\n\n\n// WEBPACK FOOTER //\n// ./server/api/upload.js","module.exports = require(\"multer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"multer\"\n// module id = 13\n// module chunks = 0","let express = require('express')\nlet router = express.Router()\nlet userDao = require('../dao/userDao')\n\nrouter.post('/login', (req, res) => {\n  let user = {\n    name: req.body.username || '',\n    password: req.body.password || ''\n  }\n  userDao.queryUser(user, (err, result) => {\n    if (err) {\n      return err\n    }\n    if (result.length === 1) {\n      req.session.user = result[0].name\n      // result = result.map(function (item, index) {\n      //   return {\n      //     name: item.name,\n      //     id: item.id\n      //   }\n      // })\n      console.log(result[0].name + ':login')\n      var url = req.session.originalUrl ? req.session.originalUrl : '/'\n      res.json(url)\n    } else {\n      res.json({errCode: '001', msg: '找不到用户！'})\n    }\n  })\n})\n\nrouter.post('/regist', (req, res) => {\n  let user = {\n    name: req.body.username || '',\n    password: req.body.password || ''\n  }\n  userDao.addUser(user, (err, result) => {\n    if (err) {\n      return err\n    }\n    console.log(result)\n    if (result.insertId) {\n      req.session.user = user.name\n      // result = result.map(function (item, index) {\n      //   return {\n      //     name: item.name,\n      //     id: item.id\n      //   }\n      // })\n      console.log(result.insertId + ':login')\n      var url = '/'\n      res.json(url)\n    } else {\n      res.json({errCode: '001', msg: '注册失败！'})\n    }\n  })\n})\n\nmodule.exports = router\n\n\n\n// WEBPACK FOOTER //\n// ./server/api/account.js","let db = require('../Dao')\r\nlet crypto = require('crypto')\r\n\r\nmodule.exports =\r\n  {\r\n    // 验证用户名密码\r\n    queryUser (user, callback) {\r\n      let sql = 'select * from user where name = ? and password = ? '\r\n      console.log(user)\r\n      // 加密密码\r\n      user.password = crypto.createHash('md5').update(user.password).digest('hex')\r\n      db.query(sql, [user.name, user.password], (err, result) => {\r\n        if (err) {\r\n          return callback(true)\r\n        }\r\n        callback(false, result)\r\n      })\r\n    },\r\n    // 验证用户名密码\r\n    addUser (user, callback) {\r\n      let sql = 'insert into user (name, password) values (?, ?) '\r\n      console.log(user)\r\n      // 加密密码\r\n      user.password = crypto.createHash('md5').update(user.password).digest('hex')\r\n      db.query(sql, [user.name, user.password], (err, result) => {\r\n        if (err) {\r\n          return callback(true)\r\n        }\r\n        callback(false, result)\r\n      })\r\n    }\r\n  }\n\n\n// WEBPACK FOOTER //\n// ./server/dao/userDao.js","module.exports = require(\"crypto\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"crypto\"\n// module id = 16\n// module chunks = 0","module.exports = {\n  /*\n  ** Headers of the page\n  */\n  head: {\n    title: 'starter',\n    meta: [\n      { charset: 'utf-8' },\n      { name: 'viewport', content: 'width=device-width,height=device-height,inital-scale=1.0,maximum-scale=1.0,user-scalable=no;' },\n      { hid: 'description', name: 'description', content: 'Nuxt.js project' }\n    ],\n    link: [\n      { rel: 'icon', type: 'image/x-icon', href: '/favicon.ico' }\n    ]\n  },\n  /*\n  ** Global CSS\n  */\n  css: ['~/assets/css/main.css'],\n  /*\n  ** Add axios globally\n  */\n  build: {\n    vendor: ['axios', 'element-ui', 'mint-ui'],\n    /*\n    ** Run ESLINT on save\n    */\n    extend (config, ctx) {\n      if (ctx.isClient) {\n        config.module.rules.push({\n          enforce: 'pre',\n          test: /\\.(js|vue)$/,\n          loader: 'eslint-loader',\n          exclude: /(node_modules)/\n        })\n      }\n    }\n  },\n  plugins: ['~plugins/element-ui', '~plugins/mint-ui']\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js"],"sourceRoot":""}